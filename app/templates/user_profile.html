{%extends 'base.html'%}

{%block content%}

    <h1> Редактирование профиля </h1>
    
    {%with messages = get_flashed_messages()%}
        {%if messages%}
            {%for message in messages%}
                <li> {{message}} </li> 
            {%endfor%}
        {%endif%}
    {%endwith%}

    <form action = '' method = 'post' novalidate>
    
        {{form.hidden_tag()}}
        
        <p>
        {{form.username.label}}<br>
        {{form.username(size = 32)}}<br>
        {%if form.username_validate()%}
            <span style = 'color: red;'> {{form.username_validate()}} </span>
        {%endif%}
        </p>
        
        <p>
        {{form.old_password.label}}<br>
        {{form.old_password(size = 32)}}<br>
        
        {%if form.old_password.errors%}
            <span style = 'color: red;'> Введите пароль </span>
        {%endif%}
        
        {%if form.old_password_validate() == True%}
            <span style = 'color: green;'> Верный пароль </span>
        {%else%}
            <span style = 'color: red;'> {{form.old_password_validate()}} </span>
        {%endif%}
        </p>
        
        <p>
        {{form.new_password.label}}<br>
        {{form.new_password(size = 32)}}<br>
        {%if form.new_password.errors%}
            <span style = 'color: red;'> Введите пароль </span>
        {%endif%}
        </p>
        
        <p>
        {{form.email.label}}<br>
        {{form.email(size = 32)}}<br>
        {%if form.email_validate()%}
            <span style = 'color: red;'> {{form.email_validate()}} </span>
        {%endif%}
        </p>
        
        <p>
            {{form.submit()}}
        </p>
        
    </form>

{%endblock%}